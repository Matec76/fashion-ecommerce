<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>STYLEX | Cấu hình Thanh toán</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .page-breadcrumb { font-size: 14px; color: #7f8c8d; margin-bottom: 10px; }
        .topbar h2 { font-size: 28px; font-weight: 700; color: #0f1b2c; margin: 0; }
        .dashboard-body { padding: 40px; background-color: #fff; max-width: 800px; }
        .btn-back { text-decoration: none; color: #666; margin-right: 20px; display: inline-flex; align-items: center; }
        
        .payment-method { border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .payment-info h4 { margin: 0 0 5px 0; font-size: 16px; }
        .payment-info p { margin: 0; color: #777; font-size: 14px; }
        
        /* Toggle Switch Button CSS */
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #27ae60; }
        input:checked + .slider:before { transform: translateX(24px); }

        .bank-details { margin-top: 10px; padding: 15px; background: #f9f9f9; border-radius: 6px; display: none; }
        .form-group { margin-bottom: 10px; }
        .form-group input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .btn-save { background: #1e293b; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; transition: 0.3s; }
        .btn-save:hover { background: #0f1b2c; }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo"><h1>STYLEX</h1></div>
        <nav class="main-menu">
            <ul>
                <li><a href="{{ url_for('auth.tongquan') }}"><span class="material-symbols-outlined">home</span> Tổng quan</a></li>
                <li><a href="{{ url_for('khac.cauhinh') }}" class="active"><span class="material-symbols-outlined">settings</span> Cấu hình</a></li>
            </ul>
        </nav>
    </aside>

    <main class="content-area" style="background-color: #fff;">
        <div style="padding: 20px 40px 0 40px;">
            <div class="page-breadcrumb">
                <a href="{{ url_for('khac.cauhinh') }}" class="btn-back"><span class="material-symbols-outlined">arrow_back</span> Quay lại</a>
                Cấu hình / Thanh toán
            </div>
            <header class="topbar">
                <h2>Phương thức thanh toán</h2>
                <div class="user-info">
                    <span>Admin | <a href="{{ url_for('auth.logout') }}">Thoát</a></span>
                </div>
            </header>
        </div>

        <div class="dashboard-body">
            <div class="payment-method">
                <div class="payment-info">
                    <h4>Thanh toán khi nhận hàng (COD)</h4>
                    <p>Khách hàng trả tiền mặt cho shipper khi nhận hàng.</p>
                </div>
                <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
            </div>

            <div class="payment-method" style="display: block;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="payment-info">
                        <h4>Chuyển khoản Ngân hàng</h4>
                        <p>Hiển thị thông tin chuyển khoản tại trang đặt hàng.</p>
                    </div>
                    <label class="switch"><input type="checkbox" checked id="bankToggle"><span class="slider"></span></label>
                </div>
                
                <div class="bank-details" id="bankForm" style="display: block;">
                    <div class="form-group"><input type="text" id="bank_name" placeholder="Tên ngân hàng (VD: Vietcombank)"></div>
                    <div class="form-group"><input type="text" id="bank_acc" placeholder="Số tài khoản (VD: 1900 888 888)"></div>
                    <div class="form-group"><input type="text" id="bank_user" placeholder="Chủ tài khoản (VD: NGUYEN VAN A)"></div>
                    <button class="btn-save" id="saveBank">Lưu thông tin Bank</button>
                </div>
            </div>

            <div class="payment-method">
                <div class="payment-info">
                    <h4>Ví điện tử Momo</h4>
                    <p>Tích hợp thanh toán qua QR Code Momo.</p>
                </div>
                <label class="switch"><input type="checkbox"><span class="slider"></span></label>
            </div>
        </div>
    </main>

    <script>
        // Xử lý ẩn hiện form ngân hàng
        const bankToggle = document.getElementById('bankToggle');
        const bankForm = document.getElementById('bankForm');

        bankToggle.addEventListener('change', function() {
            bankForm.style.display = this.checked ? 'block' : 'none';
        });

        // Giả lập lưu thông tin
        document.getElementById('saveBank').addEventListener('click', function() {
            Swal.fire({
                title: 'Đang lưu...',
                timer: 1000,
                didOpen: () => { Swal.showLoading(); }
            }).then(() => {
                Swal.fire('Thành công', 'Thông tin chuyển khoản đã được cập nhật', 'success');
            });
        });
    </script>
</body>
</html>